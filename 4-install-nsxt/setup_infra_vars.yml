# Copyright 2018 VMware, Inc.
# SPDX-License-Identifier: BSD-2-Clause OR GPL-3.0-only
#

{

  #
  # Flag to create or delete all the objects
  # Accepts: 'present' to create; 'absent' to delete
  #
  "state": "present",

  #
  # Common NSX Appliance variables
  #
  "nsx_username": "admin",
  "nsx_password": "VMware1!VMware1!",
  "validate_certs": False,

  #
  # First NSX appliance node. Defined separate based on the consumption.
  # Accepts both IP (IPv4) and FQDN for 'mgmt_ip'
  #
  "nsx_node1": {
    "hostname": "0nsxtmgr.rubber.ducky",
    "mgmt_ip": "192.168.254.61",
    "datacenter": "Datacenter",
    "cluster": "Management",
    "datastore": "datastore36",
    "portgroup": "VM Network"
  },

  "transport_zones": [
    {
      "display_name": "Overlay-TZ",
      "description": "NSX Configured Overlay Transport Zone",
      "transport_type": "OVERLAY",
      "host_switch_name": "nvds",
      "uplink_teaming_policy_names": []
    },
    {
      "display_name": "VLAN-TZ",
      "description": "NSX Configured VLAN Transport Zone",
      "transport_type": "VLAN",
      "host_switch_name": "nvds",
      "uplink_teaming_policy_names": ["uplink1", "uplink2"]

    }
  ],


  "transport_node_profiles": [
    {
      "display_name": "TNP-1",
      "description": "Compute Transport Node Profile",
      "host_switches": [
        {

          "host_switch_name": "NSXT-DATA-OVERLAY",
          "host_switch_id": "50 3e d3 ea f9 c8 a7 15-a0 84 77 ba 39 56 46 47", #esxcli network vswitch dvs vmware list
          "host_switch_type": "VDS",
          "host_switch_mode": "STANDARD",
          "host_switch_profiles": [
            {
              "name": "esxi_uplink_profile",
              "type": "UplinkHostSwitchProfile"
            }
          ],
          "pnics": [],
          "uplinks": [
            {
              "vds_uplink_name": "Uplink 1",
              "uplink_name": "uplink-1"
            }
          ],
          "ip_assignment_spec": {
              "resource_type": "StaticIpPoolSpec",
              "ip_pool_name": "ippool1"
          },
          "transport_zone_endpoints": [
            {
              "transport_zone_name": "overlayTZ"
            }
          ]
        }
      ],
      "transport_zone_endpoints": []
    }
  ],


  "transport_node_collections": [
    {
      "state": "present",
      "display_name": "workload-cluster-1-collection",
      "description": "TNP for cluster1",
      "resource_type": "TransportNodeCollection",
      "compute_manager_name": "vcenter7",
      "cluster_name": "workload-cluster1",
      "transport_node_profile_name": "TNP-1"
    }
  ],

}